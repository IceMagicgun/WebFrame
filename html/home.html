<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html>

<head>
    <title>home</title>
    <!-- <link rel="stylesheet" type="text/css" href="/css/a.css"> -->
    <script src="/js/d3.v4.min.js"></script>
    <script src="/js/venn.js"></script>
    <script src="/js/index.js"></script>
</head>

<body>
    <div id="site-title">test</div>
    <div id="venn"></div>
</body>

<script>
    let ss = ["奇数", "偶数", "质数", "2的幂", "3的倍数"];
    let data = new Map();
    data["奇数"] = [1, 3, 5, 7, 9];
    data["偶数"] = [2, 4, 6, 8, 10];
    data["质数"] = [2, 3, 5, 7];
    data["2的幂"] = [2, 4, 8];
    data["3的倍数"] = [3, 9];
    let sets = [];
    function ff(k) {
        if (k.length < ss.length) {
            for (let i = 0; i < 2; i++) {
                k.push(i)
                ff(k)
                k.pop()
            }
            return
        }
        let name = [];
        let lebel = "";
        for (let i = 0; i < ss.length; i++) {
            if (k[i] > 0) {
                name.push(ss[i]);
                lebel += ss[i];
            }
        }
        if (name.length == 0) {
            return
        }
        let n = 0;
        for (let i = 1; i <= 10; i++) {
            let flag = true;
            for (let j = 0; j < ss.length; j++) {
                if (k[j] == 0)
                    continue;
                if (data[ss[j]].indexOf(i) == -1) {
                    flag = false;
                    break;
                }
            }
            if (flag)
                n++;
        }
        if (n == 0) {
            return
        }
        if (name.length == 1)
            sets.push({ sets: name, size: n });
        else
            sets.push({ sets: name, size: n, label: lebel });
    }
    ff([]);
    console.log(sets);
    let chart = venn.VennDiagram()
    chart.wrap(false)
        .width(1280)
        .height(1280);
    let div = d3.select("#venn").datum(sets).call(chart);
    div.selectAll("text").style("fill", "white");
    div.selectAll(".venn-circle path").style("fill-opacity", .6);
</script>

</html>